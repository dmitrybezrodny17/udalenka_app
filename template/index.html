<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="{{ url_for('static', filename='jquery.min.js') }}"></script>
	<script type=text/javascript src="{{ url_for('static', filename='select_category.js') }}"></script>
	<link type=text/css href="{{ url_for('static', filename='accordion.css') }}" rel="stylesheet"/>
	<script type=text/javascript src="{{ url_for('static', filename='select2.js') }}"></script>
	<link href="{{ url_for('static', filename='select2.min.css') }}" rel="stylesheet"/>
	<script src="{{ url_for('static', filename='select2.min.js') }}"></script>
	<script type=text/javascript src="{{ url_for('static', filename='first_data.js', v='15') }}"></script>
	<link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}" />
	<title>Удалёнка — Поиск удалённой работы</title>
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-KFD6FTRLB5"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'G-KFD6FTRLB5');
    </script>
  </head>

  <body style="margin:0;"  ontouchstart="" >
	<header>
		<div class="header_overlay">
			<h1 class="header_title" onclick="window.location.href = '/'"><img src="{{ url_for('static', filename='logo.svg') }}" class="header_title_logo">Удалёнка (Beta)</h1>
			
			<style>
    			.dropdown {
    			  position: relative;
    			  display: inline-block;
    			}
    
    			.dropdown-content {
    			  display: none;
    			  position: absolute;
    			  background-color: #f9f9f9;
    			  min-width: 100px;
    			  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    			  padding: 12px 16px;
    			  z-index: 1;
    			}
    
    			.dropdown:hover .dropdown-content {
    			  display: block;
    			}
			</style>

			<div class="dropdown" style="position:absolute;left:12px;top:12px;">
			  <img src="{{ url_for('static', filename='menu2.png') }}" width=30px height=30px>
			  <div class="dropdown-content">
				<a href="/">Главная</a><br>
				<a href="/faq">FAQ</a><br>
				<a href="/blog">Блог</a><br>
			  </div>
			</div>
			
			<form  class="header_form">
				<select id="skilz" class="js-example-basic-multiple" name="skills" style="width:200px">
				<option>Все вакансии</option>
				<option>Избранное</option>
				<option>HR</option>
				<optgroup label="Marketing">
			    	<option>SEO/E-mail</option>	
			    	<option>Ads/Lead</option>	
				</optgroup>
				<option>SMM</option>
				<option>IT-sales</option>
				<option>Analyst</option>
				<option>Support</option>				
				<option>Databases</option>		
				<option>SysAdmin/Network</option>
				<option>IT Security</option>
				<option>QA Manual</option>
				<option>QA Automation</option>
				<option>Copywriting</option>
				<optgroup label="Management">
						<option>Project Management</option>
						<option>Product Management</option>	
						<option>Marketing Management</option>
				<optgroup label="Developer">
						<option>Full Stack</option>
						<option>Python</option>
						<option>Java</option>
						<option>Golang</option>
						<option>Scala</option>
						<option>C/C++</option>
						<option>C#/.NET</option>
						<option>1C</option>
						<option>PHP</option>
						<option>Node.JS</option>
						<option>Ruby</option>
						<option>CRM, ERP</option>
						<option>Embedded</option>
						<option>Front End</option>
						<option>Data Science</option>
						<option>Blockchain</option>
			        	<option>Game Development</option>
			         	<option>Mobile Development</option>
				</optgroup>
				<optgroup label="Design">
						<option>Web Design</option>
						<option>UI/UX</option>
						<option>Graphic Design</option>
						<option>3D Design</option>
						<option>Motion Design</option>
				</optgroup>
				</select>
			</form>
		</div>
	</header>
	
	<button onclick="acc(this)" class="accordion" style="top: 0; display: block; border: 0; padding-bottom: 2px; padding-top: 7px; margin-top:3px; margin-bottom:3px;">
    	<div id="job_id" class="accordion_head">
    		<div class="accordion_head_info" style="width:100%">
    			<span id="filter_label" class="accordion_head_info_position" style="overflow: hidden; white-space: nowrap; text-overflow: ellipsis; font-family:'MontBold'; display:inline;">Фильтр▾</span>
				<a id="favorite" class="favorite" onclick="favorite(this)" style="float:right; font-size:30px; line-height:20px">☆</a>
    		</div>
    	</div>
    	<div class="panel">
    		<p style="margin: 5px 0px 0px 0px; font-size:14px; font-family:'Mont';">Опыт работы:</p>
    		<div class="pagination" style="margin: 5px 10px 5px 0px; justify-content: left; font-size:14px; font-family:'Mont'; flex-wrap: wrap;">
    			<a id="page" onclick="expir(this)" value="69" style="margin: 0 5px 5px 0; border: 1px solid #D1D1D1; border-radius: 5px; padding: 5px;">Все</a>
    			<a id="page" onclick="expir(this)" value="1" style="margin: 0 5px 5px 0; border: 1px solid #D1D1D1; border-radius: 5px; padding: 5px;">1 год</a>
    			<a id="page" onclick="expir(this)" value="2" style="margin: 0 5px 5px 0; border: 1px solid #D1D1D1; border-radius: 5px; padding: 5px;">2 года</a>
    			<a id="page" onclick="expir(this)" value="3" style="margin: 0 5px 5px 0; border: 1px solid #D1D1D1; border-radius: 5px; padding: 5px;">3 года</a>
    			<a id="page" onclick="expir(this)" value="4" style="margin: 0 5px 5px 0; border: 1px solid #D1D1D1; border-radius: 5px; padding: 5px;">4 года</a>
    			<a id="page" onclick="expir(this)" value="10" style="margin: 0 5px 5px 0; border: 1px solid #D1D1D1; border-radius: 5px; padding: 5px;">5 лет и больше</a>
    		</div>
			<p id="tag_label" style="margin: 0px; font-size:14px; font-family:'Mont';">Теги:</p>
			<div id="tag_list" class="tag_list" style="display:flex; align-items:center; margin: 5px 10px 5px 0px; justify-content: left; font-size:14px; font-family:'Mont'; flex-wrap: wrap;">
			</div>
			<p id="fav_label" style="margin: 0px; font-size:14px; font-family:'Mont';">Избранное:</p>
			<div id="fav_list" class="fav_list" style="display:flex; align-items:center; margin: 5px 10px 5px 0px; justify-content: left; font-size:14px; font-family:'Mont'; flex-wrap: wrap;">
			</div>
    	</div>
	</button>
	
	<script>
		function tags(e) {
			var tag = e.innerText;
			var list = [];
			var tags = JSON.parse(localStorage.getItem("tags"));
			for (i in tags) {
				list.push(tags[i]);
			}
				
			if (tags != null){
				if (!tags.includes(tag)){
					list.push(tag);
				} else {
					const index = list.indexOf(tag);
					list.splice(index, 1);
				}
							
				} else {
					list.push(tag);
				}
						
				localStorage.setItem('tags', JSON.stringify(list));
		}
	</script>	
	
	<script>
		function favorite(e) {
			var category = window.location.href.split('/')[3].split('#')[0];
			var list = []
			var favorites = JSON.parse(localStorage.getItem("favorites"));
			for (i in favorites) {
				list.push(favorites[i]);
			}
				
			if (favorites != null){
				if (!favorites.includes(category)){
					e.textContent = '★';
	        	    document.querySelector('#fav_label').style = "margin:5px 0px 0px 5px; font-size:14px; font-family:'Mont'";
		            document.querySelector('#fav_list').style = "display:flex; align-items:center; margin:5px 10px 10px 0px; justify-content:left; font-size:14px; font-family:'Mont'; flex-wrap: wrap";
					list.push(category);
					console.log(list)
					var fav_template = document.querySelector('#fav_template');
					var fav_list = document.querySelector("#fav_list");
					let fav_clone = fav_template.content.cloneNode(true);
					fav_clone.querySelector('#fav').setAttribute("href", "/" + category);
					fav_clone.querySelector('#fav').textContent = category;
					fav_list.appendChild(fav_clone);
				} else {
					const index = list.indexOf(category);
					list.splice(index, 1);
					console.log(list)
					e.textContent = '☆';
					var created_favs = document.getElementsByClassName("fav");
					for (var i = 0; i < created_favs.length; i++) {
						if (created_favs[i].textContent == category) {
							created_favs[i].remove();
						}
					}
					console.log(list.length);
					if (list.length == 0) {
		                document.querySelector('#fav_label').style = "visibility: hidden; margin:0; height:0;";
		                document.querySelector('#fav_list').style = "display:flex; align-items:center; margin:0; justify-content:left; font-size:14px; font-family:'Mont'; flex-wrap: wrap";
					}
				}
							
				} else {
					e.textContent = '★';
	        	    document.querySelector('#fav_label').style = "margin:5px 0px 0px 5px; font-size:14px; font-family:'Mont'";
		            document.querySelector('#fav_list').style = "display:flex; align-items:center; margin:5px 10px 10px 0px; justify-content:left; font-size:14px; font-family:'Mont'; flex-wrap: wrap";
					list.push(category);
					console.log(list)
					var fav_template = document.querySelector('#fav_template');
					var fav_list = document.querySelector("#fav_list");
					let fav_clone = fav_template.content.cloneNode(true);
					fav_clone.querySelector('#fav').setAttribute("href", "/" + category);
					fav_clone.querySelector('#fav').textContent = category;
					fav_list.appendChild(fav_clone);
				}
						
				localStorage.setItem('favorites', JSON.stringify(list));
		}
	</script>	
			
	<script>
		function expir(e) {
			if (!$(event.target).hasClass('button')){
				document.querySelectorAll('[id=page]').forEach((element)=> {
					element.classList.remove('active');
				});
				var current_exp = JSON.parse(localStorage.getItem("exp"));
				e.classList.add('active');
				localStorage.setItem('exp', e.getAttribute('value'));
				location.reload();
			}
		}
	</script>
	
	<button id="news" class="accordion" style="top: 0; display: block;">
		<div id="job_id" class="accordion_head" style="justify-content: center">
			<p id="new_posts" style="font-family: 'MontBold';"></p><p value="14" id="old_posts"></p>
		</div>
			<p style="margin-top: 5px; text-align:center;">Появились свежие вакансии по Вашему запросу, обновите страницу чтобы их посмотреть.</p>
			<a id="url" onClick="location.reload();" class="button" style="padding:10px; width:180px;">Обновить страницу</a>
	</button>
			
	<script>
		document.querySelector('#news').style = "top: 0; display: none; max-height: 0; border: 0; padding: 0;";
	</script>
	
	<section class="accordion_overlay" style="margin-top: 0;">
	<div id="scroller">
	<template id="post_template">
			<button onclick="accordion(this)" class="accordion" style="top: 0; display: block;">
				<div id="job_id" class="accordion_head">
					<div id="img" class="accordion_head_logo" style=""></div>
					<div class="accordion_head_info">
						<span id="title" class="accordion_head_info_position" style="overflow: hidden; white-space: nowrap; text-overflow: ellipsis;"></span>
						<span id="company" class="accordion_head_info_company"  style="overflow: hidden; white-space: nowrap; text-overflow: ellipsis;"></span>
					</div>
					<span id="date" class="accordion_head_date" style="width:150px;text-align:right;"></span>
				</div>
				<div class="panel">
					<span id="description" class="panel_overlay" ></span>
					<a id="url" onClick="" class="button">Посмотреть вакансию полностью</a>
					<a id="rabota.ua" onClick="" class="button" style="visibility: hidden; height:0; margin:0; padding:0;"></a>
					<a id="work.ua" onClick="" class="button" style="visibility: hidden; height:0; margin:0; padding:0;"></a>
					<a id="dou.ua" onClick="" class="button" style="visibility: hidden; height:0; margin:0; padding:0;"></a>
					<a id="djinni.co" onClick="" class="button" style="visibility: hidden; height:0; margin:0; padding:0;"></a>
					<a id="grc.ua" onClick="" class="button" style="visibility: hidden; height:0; margin:0; padding:0;"></a>
					<a id="freelancehunt.com" onClick="" class="button" style="visibility: hidden; height:0; margin:0; padding:0;"></a>
					<a id="jooble.org" onClick="" class="button" style="visibility: hidden; height:0; margin:0; padding:0;"></a>
					<a id="trud.ua" onClick="" class="button" style="visibility: hidden; height:0; margin:0; padding:0;"></a>
					<a id="superjob.ru" onClick="" class="button" style="visibility: hidden; height:0; margin:0; padding:0;"></a>
					<a id="jobs.ua" onClick="" class="button" style="visibility: hidden; height:0; margin:0; padding:0;"></a>
					<a id="trud.com" onClick="" class="button" style="visibility: hidden; height:0; margin:0; padding:0;"></a>
				</div>
			</button>
	</template>
	</div>
	</section>
	
	<template id="fav_template">
		<a id="fav" class="fav" style="margin: 0 5px 5px 0; border: 1px solid #D1D1D1; border-radius: 5px; padding: 5px; text-decoration:none;">template</a>
	</template>
	
	<template id="tag_template">
		<a id="tag" class="tag" onclick="tags(this)" style="margin: 0 5px 5px 0; border: 1px solid #D1D1D1; border-radius: 5px; padding: 5px; text-decoration:none;">template</a>
	</template>

	<div id="sentinel" style="height:10px"></div>
	<div class="loader" id="loader"></div>

	<script>
	 function acc(e) {
			var panel = e.querySelector('.panel');
				if (panel.style.maxHeight) {
				  panel.style.maxHeight = null;
				  panel.style.backgroundColor = "white";
				  e.style.backgroundColor = "white";
				  e.classList.remove('active');
				} else {
				  panel.style.maxHeight = panel.scrollHeight + "px";
				  panel.style.backgroundColor = "#fff";
				  e.style.backgroundColor = "#fff";
				  e.classList.add('active');
			} 
		}
	</script>

	<script>
	 function accordion(e) {
			if (!$(event.target).hasClass('button') && !$(event.target).hasClass('favorite')){
			
				var post = $(e.querySelector('.accordion_head'));
				var job_id = post.attr('id');
				var list = []
				var viewed = JSON.parse(localStorage.getItem("viewed"));
				for (i in viewed) {
						list.push(viewed[i]);
					}
				
				if (viewed != null){
					if (!viewed.includes(job_id)){
						e.querySelector("#title").style = "color: #D3D3D3;overflow: hidden; white-space: nowrap; text-overflow: ellipsis;";
						e.querySelector("#company").style = "color: #D3D3D3;overflow: hidden; white-space: nowrap; text-overflow: ellipsis;";
						e.querySelector("#date").style = "color: #D3D3D3";
						list.push(job_id);
					}
				} else {
					e.querySelector("#title").style = "color: #D3D3D3;overflow: hidden; white-space: nowrap; text-overflow: ellipsis;";
					e.querySelector("#company").style = "color: #D3D3D3;overflow: hidden; white-space: nowrap; text-overflow: ellipsis;";
					e.querySelector("#date").style = "color: #D3D3D3";
					list.push(job_id);
				}
				
				localStorage.setItem('viewed', JSON.stringify(list));
				var localValue = localStorage.getItem('viewed');
				
				var panel = e.querySelector('.panel');
				if (panel.style.maxHeight) {
				  panel.style.maxHeight = null;
				  panel.style.backgroundColor = "white";
				  e.style.backgroundColor = "white";
				 /* e.scrollIntoView({behavior: 'smooth'});*/
				  if (e.getBoundingClientRect().top < 0) {
					window.scroll({top: findPos(e), behavior: 'smooth'});
					function findPos(obj) {
						var curtop = 0;
						if (obj.offsetParent) {
							do {
								curtop += obj.offsetTop;
							} while (obj = obj.offsetParent);
						return [curtop];
						}
					}
				  }
				} else {
    				panel.style.maxHeight = panel.scrollHeight + "px";
    				panel.style.backgroundColor = "#fff";
    				e.style.backgroundColor = "#fff";
    			    e.classList.add('active');
			} 
		  }
		}
	</script>

	<button onclick="topFunction()" id="myBtn" style="border: 0px; background: transparent; display: block;"><img id="myImg" style="display: none;" src="{{ url_for('static', filename='top.png') }}" width="50" height="50" alt="submit"></button>

	<script>
	mybutton = document.getElementById("myBtn");
	myimage = document.getElementById("myImg");
	window.onscroll = function() {scrollFunction()};

	function scrollFunction() {
	  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
		mybutton.style.display = "block";
		myimage.style.display = "block";
	  } else {
		mybutton.style.display = "none";
		myimage.style.display = "none";
	  }
	}

	function topFunction() {
	  document.body.scrollTop = 0;
	  document.documentElement.scrollTop = 0;
	}
	</script>

  </body>
</html>
				